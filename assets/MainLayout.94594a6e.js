import{Q as T}from"./QIcon.ef46f226.js";import{u as Z,Q as ee,a as te,b as ae,c as oe,d as se,e as le}from"./use-meta.8e87fe3f.js";import{Q as f}from"./QBtn.fbee441a.js";import{c as B,h as E,a as ne}from"./QSpinner.dbe465cd.js";import{c as v,h as q,i as ie,e as _,r as u,a as re,w as y,o as ue,l as de,g as ce,d as U,_ as N,f as r,j as h,k as s,m as a,n as b,p as Q,t as S,q as p,s as H,u as W,v as M,x as O,F as P,y as V,z as me,A as fe,B as pe}from"./index.f12d3cac.js";import{Q as C,a as L}from"./QItemLabel.bdd3f28d.js";import{Q as A}from"./QItem.519aba9c.js";import{Q as ve}from"./QResizeObserver.a113d63f.js";import{Q as he}from"./QCardSection.2c0610be.js";import{Q as ge}from"./QCardActions.f08ec53e.js";import{Q as ke}from"./QCard.b4871d3f.js";import{Q as we}from"./QDialog.ebaddfdc.js";import{C as z}from"./ClosePopup.f5834be9.js";import{u as ye}from"./use-quasar.dead7fbd.js";import{storeGet as be,storeSet as qe}from"./StoreStuff.8d59764e.js";import"./use-dark.060a640c.js";import"./TouchPan.149b9e91.js";import"./selection.b77ae63e.js";import"./format.2a3572e1.js";import"./QScrollObserver.e745a3a1.js";import"./scroll.e1c8a083.js";import"./dom.baaf5f1b.js";import"./Ripple.59af08ab.js";import"./use-transition.155b058f.js";import"./focus-manager.32f8d49a.js";var $e=B({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:l}){const d=v(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>q("div",{class:d.value},E(l.default))}}),Qe=B({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:l}){const d=v(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>q("div",{class:d.value,role:"toolbar"},E(l.default))}}),Se=B({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:l,emit:d}){const{proxy:{$q:g}}=ce(),o=ie(de,_);if(o===_)return console.error("QFooter needs to be child of QLayout"),_;const k=u(parseInt(e.heightHint,10)),c=u(!0),$=u(re.value===!0||o.isContainer.value===!0?0:window.innerHeight),n=v(()=>e.reveal===!0||o.view.value.indexOf("F")>-1||g.platform.is.ios&&o.isContainer.value===!0),D=v(()=>o.isContainer.value===!0?o.containerHeight.value:$.value),F=v(()=>{if(e.modelValue!==!0)return 0;if(n.value===!0)return c.value===!0?k.value:0;const t=o.scroll.value.position+D.value+k.value-o.height.value;return t>0?t:0}),I=v(()=>e.modelValue!==!0||n.value===!0&&c.value!==!0),j=v(()=>e.modelValue===!0&&I.value===!0&&e.reveal===!0),G=v(()=>"q-footer q-layout__section--marginal "+(n.value===!0?"fixed":"absolute")+"-bottom"+(e.bordered===!0?" q-footer--bordered":"")+(I.value===!0?" q-footer--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus"+(n.value!==!0?" hidden":""):"")),K=v(()=>{const t=o.rows.value.bottom,i={};return t[0]==="l"&&o.left.space===!0&&(i[g.lang.rtl===!0?"right":"left"]=`${o.left.size}px`),t[2]==="r"&&o.right.space===!0&&(i[g.lang.rtl===!0?"left":"right"]=`${o.right.size}px`),i});function m(t,i){o.update("footer",t,i)}function w(t,i){t.value!==i&&(t.value=i)}function x({height:t}){w(k,t),m("size",t)}function J(){if(e.reveal!==!0)return;const{direction:t,position:i,inflectionPoint:Y}=o.scroll.value;w(c,t==="up"||i-Y<100||o.height.value-D.value-i-k.value<300)}function X(t){j.value===!0&&w(c,!0),d("focusin",t)}y(()=>e.modelValue,t=>{m("space",t),w(c,!0),o.animate()}),y(F,t=>{m("offset",t)}),y(()=>e.reveal,t=>{t===!1&&w(c,e.modelValue)}),y(c,t=>{o.animate(),d("reveal",t)}),y([k,o.scroll,o.height],J),y(()=>g.screen.height,t=>{o.isContainer.value!==!0&&w($,t)});const R={};return o.instances.footer=R,e.modelValue===!0&&m("size",k.value),m("space",e.modelValue),m("offset",F.value),ue(()=>{o.instances.footer===R&&(o.instances.footer=void 0,m("size",0),m("offset",0),m("space",!1))}),()=>{const t=ne(l.default,[q(ve,{debounce:0,onResize:x})]);return e.elevated===!0&&t.push(q("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),q("footer",{class:G.value,style:K.value,onFocusin:X},t)}}});const Ce=U({name:"EssentialLink",props:{title:{type:String,required:!0},caption:{type:String,default:""},link:{type:String,default:"#"},icon:{type:String,default:""}}});function Le(e,l,d,g,o,k){return r(),h(A,{to:e.link,class:"text-grey-7","active-class":"text-primary"},{default:s(()=>[e.icon?(r(),h(C,{key:0,avatar:""},{default:s(()=>[a(T,{name:e.icon,size:"xl"},null,8,["name"])]),_:1})):b("",!0),a(C,null,{default:s(()=>[a(L,null,{default:s(()=>[Q(S(e.title),1)]),_:1}),a(L,{caption:""},{default:s(()=>[Q(S(e.caption),1)]),_:1})]),_:1})]),_:1},8,["to"])}var _e=N(Ce,[["render",Le]]);const Ve=[{title:"Library",caption:"",icon:"o_collections_bookmark",link:"/library?tab=0"},{title:"Updates",caption:"",icon:"o_new_releases",link:"/updates"},{title:"Extensions",caption:"",icon:"o_extension",link:"/extensions"},{title:"Sources",caption:"",icon:"o_explore",link:"/sources"},{title:"Downloads",caption:"",icon:"o_download",link:"/downloads"},{title:"Settings",caption:"",icon:"settings",link:"/settings"}],ze=U({name:"MainLayout",components:{EssentialLink:_e},setup(){const e=ye(),l=u("Quasar App");Z(()=>({title:l.value,titleTemplate:g=>`${g} - Tachidesk Quasar`})),e.dark.set(be("dark",!0));const d=u(!0);return{title:l,essentialLinks:Ve,tru:u(!0),leftDrawerOpen:d,toggledark(){e.dark.toggle(),qe("dark",e.dark.isActive,!0)},doSearch:u(!1),Searchenter:u(!1),FS:u(!1),newReleaseData:u({}),newReleasepopup:u(!1)}},computed:{scrollbarTheme(){return this.$q.dark.isActive?"darkSB":"lightSB"}},watch:{scrollbarTheme(e,l){document.body.classList.remove(l),document.body.classList.add(e)}},mounted(){document.body.classList.add(this.scrollbarTheme),window.addEventListener("full-screen",e=>this.isFS(e)),this.$q.localStorage.getItem("dontshowagainRL")||this.$axios.get("https://api.github.com/repos/Suwayomi/Tachidesk-VUI/releases/latest").then(({data:e})=>{e.tag_name!="r258"&&(this.newReleaseData=e,this.newReleasepopup=!0)})},unmounted(){document.body.classList.remove(this.scrollbarTheme)},methods:{dontshowagain(){this.$q.localStorage.set("dontshowagainRL",!0)},setTitle(e){this.title=e},minimize(){this.$q.platform.is.electron&&window.myWindowAPI.minimize()},toggleMaximize(){this.$q.platform.is.electron&&window.myWindowAPI.toggleMaximize()},closeApp(){this.$q.platform.is.electron&&window.myWindowAPI.close()},isFS(e){console.log(e),this.FS=e.detail}}}),Te=e=>(fe("data-v-25cc1e25"),e=e(),pe(),e),Ae=Te(()=>W("div",null,"Download the newest release from the github",-1));function Be(e,l,d,g,o,k){const c=H("router-view"),$=H("EssentialLink");return r(),h(ee,{view:"hHh Lpr lFr",class:p([e.scrollbarTheme,"mainLayout"])},{default:s(()=>[a(oe,{elevated:"",class:p(e.$q.dark.isActive?"bg-primaryD":"bg-primary")},{default:s(()=>[e.$q.platform.is.electron?(r(),h(te,{key:0,class:p(["q-electron-drag",e.FS?"hidden":""])},{default:s(()=>[a(T,{name:"img:favicon.ico",class:"q-electron-drag--exception"}),W("div",null,S(`${e.title} - Tachidesk Quasar`),1),a(ae),a(f,{dense:"",flat:"",icon:"minimize",onClick:e.minimize},null,8,["onClick"]),a(f,{dense:"",flat:"",icon:"crop_square",onClick:e.toggleMaximize},null,8,["onClick"]),a(f,{dense:"",flat:"",icon:"close",onClick:e.closeApp},null,8,["onClick"])]),_:1},8,["class"])):b("",!0),a(Qe,{class:p(e.$q.screen.sm||e.$q.screen.xs?"q-px-none":"")},{default:s(()=>[e.$q.screen.xs||e.$q.screen.sm?b("",!0):(r(),h(f,{key:0,flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:l[0]||(l[0]=n=>e.leftDrawerOpen=!e.leftDrawerOpen)})),a(f,{icon:"arrow_back",flat:"",round:"",onClick:l[1]||(l[1]=n=>e.$router.go(-1))}),a($e,{class:p(["col-grow q-pr-none",e.$q.screen.sm||e.$q.screen.xs?"q-px-none":""])},{default:s(()=>[Q(S(e.$q.screen.xs?void 0:e.title),1)]),_:1},8,["class"]),a(c,{name:"inBar"}),a(f,{elevated:"",class:p(["q-ml-sm",e.$q.dark.isActive?"light":"dark"]),round:"",icon:e.$q.dark.isActive?"light_mode":"dark_mode",onClick:e.toggledark},null,8,["class","icon","onClick"])]),_:1},8,["class"])]),_:1},8,["class"]),e.$q.screen.sm||e.$q.screen.xs?(r(),h(Se,{key:0,elevated:"",class:p(["text-primary flex no-wrap",e.$q.dark.isActive?"bg-dark":"bg-light"])},{default:s(()=>[(r(!0),M(P,null,O(e.essentialLinks,n=>(r(),h(A,{key:n.link,to:n.link,class:"text-grey-7 col-grow q-px-none","active-class":"text-primary"},{default:s(()=>[a(C,{class:"content-center"},{default:s(()=>[a(T,{name:n.icon,size:e.$q.screen.xs?"sm":"xl"},null,8,["name","size"])]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:1},8,["class"])):b("",!0),e.$q.screen.sm||e.$q.screen.xs?b("",!0):(r(),h(se,{key:1,modelValue:e.tru,"onUpdate:modelValue":l[2]||(l[2]=n=>e.tru=n),"show-if-above":"",mini:e.leftDrawerOpen,breakpoint:0,class:p(e.$q.dark.isActive?"bg-secondaryD":"bg-secondary")},{default:s(()=>[(r(!0),M(P,null,O(e.essentialLinks,n=>(r(),h($,me({key:n.title},n),null,16))),128))]),_:1},8,["modelValue","mini","class"])),a(le,null,{default:s(()=>[a(c,{class:p([e.$q.dark.isActive?"bg-dark-page":"bg-light-page","OFlow"]),onSetTitle:e.setTitle},null,8,["class","onSetTitle"])]),_:1}),a(we,{modelValue:e.newReleasepopup,"onUpdate:modelValue":l[3]||(l[3]=n=>e.newReleasepopup=n)},{default:s(()=>[a(ke,{style:{"min-width":"350px"}},{default:s(()=>[a(he,{class:""},{default:s(()=>[a(A,null,{default:s(()=>[a(C,null,{default:s(()=>[a(L,{class:"text-h6"},{default:s(()=>[Q(" A new version of VUI is avalable ")]),_:1}),a(L,{caption:"",class:"text-info q-pt-lg"},{default:s(()=>[Ae]),_:1})]),_:1})]),_:1})]),_:1}),a(ge,{align:"right",class:"text-primary"},{default:s(()=>[V(a(f,{href:e.newReleaseData.html_url,flat:"",label:"Github"},null,8,["href"]),[[z]]),V(a(f,{flat:"",label:"Ok"},null,512),[[z]]),V(a(f,{flat:"",label:"Dont show again",onClick:e.dontshowagain},null,8,["onClick"]),[[z]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["class"])}var lt=N(ze,[["render",Be],["__scopeId","data-v-25cc1e25"]]);export{lt as default};
