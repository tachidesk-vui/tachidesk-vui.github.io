import{Q as z}from"./QIcon.2d351aa4.js";import{u as x,Q as ee,a as te,b as ae,c as oe,d as le,e as se}from"./use-meta.9ee2ca41.js";import{Q as p}from"./QBtn.41944cde.js";import{c as A,h as U,a as ne}from"./QSpinner.42a2ef4a.js";import{c as g,h as q,i as re,e as _,r as u,a as ie,w as b,o as ue,l as de,g as ce,d as E,_ as N,f as r,j as m,k as l,m as a,n as y,p as $,t as S,q as v,s as H,u as W,v as M,x as O,F as P,y as V,z as me,A as fe,B as pe}from"./index.dbc7a857.js";import{Q as C,a as L}from"./QItemLabel.5faad878.js";import{Q as I}from"./QItem.1c026cc9.js";import{Q as ve}from"./QResizeObserver.15f4b422.js";import{Q as ge}from"./QCardSection.b122a637.js";import{Q as he}from"./QTooltip.68741f2f.js";import{Q as ke}from"./QCardActions.0d9aab4a.js";import{Q as we}from"./QCard.ee5db217.js";import{Q as be}from"./QDialog.69eea50b.js";import{C as T}from"./ClosePopup.12c265c9.js";import{u as ye}from"./use-quasar.dd1925fc.js";import{storeGet as qe,storeSet as $e}from"./StoreStuff.12035455.js";import"./use-dark.50bc9e4a.js";import"./TouchPan.4f1afd03.js";import"./position-engine.a2a607ab.js";import"./scroll.f1c46160.js";import"./dom.63739cd8.js";import"./format.2a3572e1.js";import"./QScrollObserver.f2bf8795.js";import"./Ripple.0ca26118.js";import"./use-transition.16e24121.js";import"./focus-manager.32f8d49a.js";var Qe=A({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:s}){const d=g(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>q("div",{class:d.value},U(s.default))}}),Se=A({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:s}){const d=g(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>q("div",{class:d.value,role:"toolbar"},U(s.default))}}),Ce=A({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:s,emit:d}){const{proxy:{$q:h}}=ce(),o=re(de,_);if(o===_)return console.error("QFooter needs to be child of QLayout"),_;const k=u(parseInt(e.heightHint,10)),c=u(!0),Q=u(ie.value===!0||o.isContainer.value===!0?0:window.innerHeight),n=g(()=>e.reveal===!0||o.view.value.indexOf("F")>-1||h.platform.is.ios&&o.isContainer.value===!0),B=g(()=>o.isContainer.value===!0?o.containerHeight.value:Q.value),D=g(()=>{if(e.modelValue!==!0)return 0;if(n.value===!0)return c.value===!0?k.value:0;const t=o.scroll.value.position+B.value+k.value-o.height.value;return t>0?t:0}),F=g(()=>e.modelValue!==!0||n.value===!0&&c.value!==!0),j=g(()=>e.modelValue===!0&&F.value===!0&&e.reveal===!0),G=g(()=>"q-footer q-layout__section--marginal "+(n.value===!0?"fixed":"absolute")+"-bottom"+(e.bordered===!0?" q-footer--bordered":"")+(F.value===!0?" q-footer--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus"+(n.value!==!0?" hidden":""):"")),K=g(()=>{const t=o.rows.value.bottom,i={};return t[0]==="l"&&o.left.space===!0&&(i[h.lang.rtl===!0?"right":"left"]=`${o.left.size}px`),t[2]==="r"&&o.right.space===!0&&(i[h.lang.rtl===!0?"left":"right"]=`${o.right.size}px`),i});function f(t,i){o.update("footer",t,i)}function w(t,i){t.value!==i&&(t.value=i)}function J({height:t}){w(k,t),f("size",t)}function X(){if(e.reveal!==!0)return;const{direction:t,position:i,inflectionPoint:Z}=o.scroll.value;w(c,t==="up"||i-Z<100||o.height.value-B.value-i-k.value<300)}function Y(t){j.value===!0&&w(c,!0),d("focusin",t)}b(()=>e.modelValue,t=>{f("space",t),w(c,!0),o.animate()}),b(D,t=>{f("offset",t)}),b(()=>e.reveal,t=>{t===!1&&w(c,e.modelValue)}),b(c,t=>{o.animate(),d("reveal",t)}),b([k,o.scroll,o.height],X),b(()=>h.screen.height,t=>{o.isContainer.value!==!0&&w(Q,t)});const R={};return o.instances.footer=R,e.modelValue===!0&&f("size",k.value),f("space",e.modelValue),f("offset",D.value),ue(()=>{o.instances.footer===R&&(o.instances.footer=void 0,f("size",0),f("offset",0),f("space",!1))}),()=>{const t=ne(s.default,[q(ve,{debounce:0,onResize:J})]);return e.elevated===!0&&t.push(q("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),q("footer",{class:G.value,style:K.value,onFocusin:Y},t)}}});const Le=E({name:"EssentialLink",props:{title:{type:String,required:!0},caption:{type:String,default:""},link:{type:String,default:"#"},icon:{type:String,default:""}}});function _e(e,s,d,h,o,k){return r(),m(I,{to:e.link,class:"text-grey-7","active-class":"text-primary"},{default:l(()=>[e.icon?(r(),m(C,{key:0,avatar:""},{default:l(()=>[a(z,{name:e.icon,size:"xl"},null,8,["name"])]),_:1})):y("",!0),a(C,null,{default:l(()=>[a(L,null,{default:l(()=>[$(S(e.title),1)]),_:1}),a(L,{caption:""},{default:l(()=>[$(S(e.caption),1)]),_:1})]),_:1})]),_:1},8,["to"])}var Ve=N(Le,[["render",_e]]);const Te=[{title:"Library",caption:"",icon:"o_collections_bookmark",link:"/library?tab=0"},{title:"Updates",caption:"",icon:"o_new_releases",link:"/updates"},{title:"Extensions",caption:"",icon:"o_extension",link:"/extensions"},{title:"Sources",caption:"",icon:"o_explore",link:"/sources"},{title:"Downloads",caption:"",icon:"o_download",link:"/downloads"},{title:"Settings",caption:"",icon:"settings",link:"/settings"}],ze=E({name:"MainLayout",components:{EssentialLink:Ve},setup(){const e=ye(),s=u("Quasar App");x(()=>({title:s.value,titleTemplate:h=>`${h} - Tachidesk-VUI`})),e.dark.set(qe("dark",!0));const d=u(!0);return{title:s,essentialLinks:Te,tru:u(!0),leftDrawerOpen:d,toggledark(){e.dark.toggle(),$e("dark",e.dark.isActive,!0)},doSearch:u(!1),Searchenter:u(!1),FS:u(!1),newReleaseData:u({}),newReleasepopup:u(!1)}},computed:{scrollbarTheme(){return this.$q.dark.isActive?"darkSB":"lightSB"}},watch:{scrollbarTheme(e,s){document.body.classList.remove(s),document.body.classList.add(e)}},mounted(){document.body.classList.add(this.scrollbarTheme),window.addEventListener("full-screen",e=>this.isFS(e)),(!this.$q.localStorage.getItem("dontshowagainRL")||"r269"==null)&&this.$axios.get("https://api.github.com/repos/Suwayomi/Tachidesk-VUI/releases/latest").then(({data:e})=>{e.tag_name!="r269"&&(this.newReleaseData=e,this.newReleasepopup=!0)})},unmounted(){document.body.classList.remove(this.scrollbarTheme)},methods:{updateServiceworker(){"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(function(e){for(let s of e)s.update()})},dontshowagain(){this.$q.localStorage.set("dontshowagainRL",!0)},setTitle(e){this.title=e},minimize(){this.$q.platform.is.electron&&window.myWindowAPI.minimize()},toggleMaximize(){this.$q.platform.is.electron&&window.myWindowAPI.toggleMaximize()},closeApp(){this.$q.platform.is.electron&&window.myWindowAPI.close()},isFS(e){console.log(e),this.FS=e.detail}}}),Ie=e=>(fe("data-v-401411bb"),e=e(),pe(),e),Ae=Ie(()=>W("div",null,"Download the newest release from the github",-1));function Be(e,s,d,h,o,k){const c=H("router-view"),Q=H("EssentialLink");return r(),m(ee,{view:"hHh Lpr lFr",class:v([e.scrollbarTheme,"mainLayout"])},{default:l(()=>[a(oe,{elevated:"",class:v(e.$q.dark.isActive?"bg-primaryD":"bg-primary")},{default:l(()=>[e.$q.platform.is.electron?(r(),m(te,{key:0,class:v(["q-electron-drag",e.FS?"hidden":""])},{default:l(()=>[a(z,{name:"img:favicon.ico",class:"q-electron-drag--exception"}),W("div",null,S(`${e.title} - Tachidesk-VUI`),1),a(ae),a(p,{dense:"",flat:"",icon:"minimize",onClick:e.minimize},null,8,["onClick"]),a(p,{dense:"",flat:"",icon:"crop_square",onClick:e.toggleMaximize},null,8,["onClick"]),a(p,{dense:"",flat:"",icon:"close",onClick:e.closeApp},null,8,["onClick"])]),_:1},8,["class"])):y("",!0),a(Se,{class:v(e.$q.screen.sm||e.$q.screen.xs?"q-px-none":"")},{default:l(()=>[e.$q.screen.xs||e.$q.screen.sm?y("",!0):(r(),m(p,{key:0,flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:s[0]||(s[0]=n=>e.leftDrawerOpen=!e.leftDrawerOpen)})),a(p,{icon:"arrow_back",flat:"",round:"",onClick:s[1]||(s[1]=n=>e.$router.go(-1))}),a(Qe,{class:v(["col-grow q-pr-none",e.$q.screen.sm||e.$q.screen.xs?"q-px-none":""])},{default:l(()=>[$(S(e.$q.screen.xs?void 0:e.title),1)]),_:1},8,["class"]),a(c,{name:"inBar"}),a(p,{elevated:"",class:v(["q-ml-sm",e.$q.dark.isActive?"light":"dark"]),round:"",icon:e.$q.dark.isActive?"light_mode":"dark_mode",onClick:e.toggledark},null,8,["class","icon","onClick"])]),_:1},8,["class"])]),_:1},8,["class"]),e.$q.screen.sm||e.$q.screen.xs?(r(),m(Ce,{key:0,elevated:"",class:v(["text-primary flex no-wrap",e.$q.dark.isActive?"bg-dark":"bg-light"])},{default:l(()=>[(r(!0),M(P,null,O(e.essentialLinks,n=>(r(),m(I,{key:n.link,to:n.link,class:"text-grey-7 col-grow q-px-none","active-class":"text-primary"},{default:l(()=>[a(C,{class:"content-center"},{default:l(()=>[a(z,{name:n.icon,size:e.$q.screen.xs?"sm":"xl"},null,8,["name","size"])]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:1},8,["class"])):y("",!0),e.$q.screen.sm||e.$q.screen.xs?y("",!0):(r(),m(le,{key:1,modelValue:e.tru,"onUpdate:modelValue":s[2]||(s[2]=n=>e.tru=n),"show-if-above":"",mini:e.leftDrawerOpen,breakpoint:0,class:v(e.$q.dark.isActive?"bg-secondaryD":"bg-secondary")},{default:l(()=>[(r(!0),M(P,null,O(e.essentialLinks,n=>(r(),m(Q,me({key:n.title},n),null,16))),128))]),_:1},8,["modelValue","mini","class"])),a(se,null,{default:l(()=>[a(c,{class:v([e.$q.dark.isActive?"bg-dark-page":"bg-light-page","OFlow"]),onSetTitle:e.setTitle},null,8,["class","onSetTitle"])]),_:1}),a(be,{modelValue:e.newReleasepopup,"onUpdate:modelValue":s[3]||(s[3]=n=>e.newReleasepopup=n)},{default:l(()=>[a(we,{style:{"min-width":"350px"}},{default:l(()=>[a(ge,{class:""},{default:l(()=>[a(I,null,{default:l(()=>[a(C,null,{default:l(()=>[a(L,{class:"text-h6"},{default:l(()=>[$(" A new version of VUI is avalable ")]),_:1}),a(L,{caption:"",class:"text-info q-pt-lg"},{default:l(()=>[Ae]),_:1})]),_:1})]),_:1})]),_:1}),a(ke,{align:"right",class:"text-primary"},{default:l(()=>[V(a(p,{href:e.newReleaseData.html_url,flat:"",label:"Github"},null,8,["href"]),[[T]]),V((r(),m(p,{flat:"",label:"Ok",onClick:e.updateServiceworker},{default:l(()=>[a(he,null,{default:l(()=>[$("will re-register Serviceworker")]),_:1})]),_:1},8,["onClick"])),[[T]]),V(a(p,{flat:"",label:"Dont show again",onClick:e.dontshowagain},null,8,["onClick"]),[[T]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["class"])}var rt=N(ze,[["render",Be],["__scopeId","data-v-401411bb"]]);export{rt as default};
