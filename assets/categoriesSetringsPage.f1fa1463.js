import{Q as I}from"./QIcon.872d3216.js";import{Q as h,a as N}from"./QItemLabel.bc894da5.js";import{Q as i}from"./QBtn.239ac4bd.js";import{Q as m}from"./QItem.3b00e4c6.js";import{Q as U}from"./QList.ab68cd2b.js";import{Q as B}from"./QPageSticky.ff48b6d2.js";import{Q as y}from"./QCardSection.dac8ef2a.js";import{Q as k}from"./QInput.c6329ef1.js";import{Q as C}from"./QToggle.4beda9c0.js";import{Q}from"./QCardActions.6881b8dd.js";import{Q as $}from"./QCard.b23e52e7.js";import{Q as b}from"./QDialog.fd3f2ebf.js";import{Q as P}from"./QPage.15fd8730.js";import{C as w}from"./ClosePopup.cd64af8f.js";import{d as V,r as d,_ as S,f as g,v as D,m as e,k as o,y as _,F as E,u as F,j as v,s as T,x as j,p as q,t as L}from"./index.e607ebbf.js";import"./QSpinner.a066f13a.js";import"./Ripple.e079ce52.js";import"./dom.a3995931.js";import"./use-dark.5a95c9ad.js";import"./use-key-composition.f3f4166c.js";import"./uid.42677368.js";import"./focus-manager.32f8d49a.js";import"./use-form.66dd7e89.js";import"./use-checkbox.2476b1b2.js";import"./option-sizes.959764e8.js";import"./use-transition.ff15bca0.js";import"./scroll.d09d2b62.js";const A=V({name:"CatSettingsEdit",props:{cat:{type:Object,required:!0}},setup(t){return{editdialog:d(!1),defaul:d(t.cat.default),edittxt:d(t.cat.name)}},methods:{savetxt(){this.$api.patchForm(`/api/v1/category/${this.cat.id}`,{name:this.edittxt,default:this.defaul.toString()})}}}),O=F("div",{class:"text-h5"},"Edit Category",-1);function z(t,a,r,s,p,c){return g(),D(E,null,[e(i,{round:"",flat:"",icon:"edit",class:"q-ml-xl",onClick:a[0]||(a[0]=n=>t.editdialog=!0)}),e(b,{modelValue:t.editdialog,"onUpdate:modelValue":a[3]||(a[3]=n=>t.editdialog=n)},{default:o(()=>[e($,null,{default:o(()=>[e(y,null,{default:o(()=>[O]),_:1}),e(m,null,{default:o(()=>[e(k,{modelValue:t.edittxt,"onUpdate:modelValue":a[1]||(a[1]=n=>t.edittxt=n),style:{width:"100%"},type:"text",label:"Category Name",outlined:""},null,8,["modelValue"])]),_:1}),e(m,null,{default:o(()=>[e(C,{modelValue:t.defaul,"onUpdate:modelValue":a[2]||(a[2]=n=>t.defaul=n),label:"Default category when adding new manga to library",color:"blue"},null,8,["modelValue"])]),_:1}),e(Q,{align:"right"},{default:o(()=>[_(e(i,{flat:"",label:"Save",color:"primary",onClick:t.savetxt},null,8,["onClick"]),[[w]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}var G=S(A,[["render",z]]);const H=V({name:"CategoriesSettingsPage",components:{catEdit:G},setup(){return{catag:d([]),editdialog:d(!1),newDialog:d(!1),edittxt:d(""),defaul:d(!1)}},mounted:function(){this.getcats()},methods:{myTweak(t){return{height:t?`calc(100vh - ${t}px)`:"100vh"}},moveto(t,a){const r=this.catag.findIndex(s=>s.order==t);r!=null&&(this.catag[r]!=null&&(this.catag=this.array_move(this.catag,t-1,a-1)),this.catag=this.catag.map((p,c)=>(p.order=c+1,p)),this.$api.patchForm("/api/v1/category/reorder",{from:t.toString(),to:a.toString()}))},array_move(t,a,r){if(r>=t.length){let s=r-t.length+1;for(;s--;)t.push(void 0)}return t.splice(r,0,t.splice(a,1)[0]),t},savetxt(){const t=new FormData;t.append("name",this.edittxt),t.append("default",this.defaul.toString()),this.$api.postForm("/api/v1/category/",{name:this.edittxt,default:this.defaul.toString()}).then(()=>this.getcats())},getcats(){this.$api.get("/api/v1/category/").then(({data:t})=>{this.catag=t.filter(a=>a.id!=0)})},delcat(t){this.$api.delete(`/api/v1/category/${t}`).then(()=>this.getcats())}}}),J=F("div",{class:"text-h5"},"New Category",-1);function K(t,a,r,s,p,c){const n=T("catEdit");return g(),v(P,{"style-fn":t.myTweak},{default:o(()=>[e(U,{separator:"",dark:t.$q.dark.isActive},{default:o(()=>[(g(!0),D(E,null,j(t.catag,(l,u)=>(g(),v(m,{key:u,class:"row justify-between"},{default:o(()=>[e(h,{avatar:""},{default:o(()=>[e(I,{name:"drag_handle"})]),_:1}),e(h,null,{default:o(()=>[e(N,null,{default:o(()=>[q(L(l.name),1)]),_:2},1024)]),_:2},1024),e(i,{round:"",flat:"",icon:"keyboard_double_arrow_up",onClick:f=>u?t.moveto(l.order,1):""},null,8,["onClick"]),e(i,{round:"",flat:"",icon:"keyboard_arrow_up",onClick:f=>u?t.moveto(l.order,l.order-1):""},null,8,["onClick"]),e(i,{round:"",flat:"",icon:"keyboard_arrow_down",onClick:f=>u<t.catag.length-1?t.moveto(l.order,l.order+1):""},null,8,["onClick"]),e(i,{round:"",flat:"",icon:"keyboard_double_arrow_down",onClick:f=>u<t.catag.length-1?t.moveto(l.order,t.catag.length):""},null,8,["onClick"]),e(n,{cat:l},null,8,["cat"]),e(i,{round:"",flat:"",icon:"delete",onClick:f=>t.delcat(l.id)},null,8,["onClick"])]),_:2},1024))),128))]),_:1},8,["dark"]),e(B,{position:"bottom-right",offset:[18,18]},{default:o(()=>[e(i,{fab:"",class:"text-black",icon:"add",color:"blue",onClick:a[0]||(a[0]=l=>t.newDialog=!0)})]),_:1}),e(b,{modelValue:t.newDialog,"onUpdate:modelValue":a[3]||(a[3]=l=>t.newDialog=l)},{default:o(()=>[e($,null,{default:o(()=>[e(y,null,{default:o(()=>[J]),_:1}),e(m,null,{default:o(()=>[e(k,{modelValue:t.edittxt,"onUpdate:modelValue":a[1]||(a[1]=l=>t.edittxt=l),style:{width:"100%"},type:"text",label:"Category Name",outlined:""},null,8,["modelValue"])]),_:1}),e(m,null,{default:o(()=>[e(C,{modelValue:t.defaul,"onUpdate:modelValue":a[2]||(a[2]=l=>t.defaul=l),label:"Default category when adding new manga to library",color:"blue"},null,8,["modelValue"])]),_:1}),e(Q,{align:"right"},{default:o(()=>[_(e(i,{flat:"",label:"Save",color:"primary",onClick:t.savetxt},null,8,["onClick"]),[[w]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["style-fn"])}var Ct=S(H,[["render",K]]);export{Ct as default};
