import{Q as C}from"./QList.92904606.js";import{a as p,Q as k}from"./QItemLabel.6b78c45a.js";import{Q as D}from"./QToggle.c7860245.js";import{Q as m}from"./QItem.87f955b6.js";import{Q as h}from"./QCheckbox.d96c02c7.js";import{Q}from"./QCard.50a5c9f8.js";import{Q as b}from"./QDialog.916163c2.js";import{Q as E}from"./QInput.dd7c91c2.js";import{Q as O}from"./QBtn.c26c6b21.js";import{Q as R}from"./QCardActions.68b479f0.js";import{Q as A}from"./QRadio.dd994075.js";import{R as g}from"./Ripple.9bc9d9e6.js";import{C as F}from"./ClosePopup.4c2b8e09.js";import{k as w,l as T,m as S,n as B,o as G}from"./models.d7e94ac2.js";import{d as I,r as v,_ as L,f as o,v as y,B as V,j as n,k as r,m as t,p as i,t as s,n as d,u as U,F as $,x as P,s as M}from"./index.be2a1a55.js";import"./QSpinner.1f524bf5.js";import"./use-dark.3bb5a166.js";import"./QIcon.536bbd60.js";import"./use-checkbox.942fcff2.js";import"./option-sizes.48acada1.js";import"./use-form.f86814d7.js";import"./use-timeout.4f668f64.js";import"./scroll.1b357255.js";import"./dom.f50efdc0.js";import"./use-transition.2e9d1385.js";import"./focus-manager.32f8d49a.js";import"./use-key-composition.c7a0adc6.js";import"./uid.42677368.js";const J=I({name:"WhatIs",props:{preference:{type:Object,required:!0},position:{type:Number,required:!0}},emits:["get-prefs"],setup(e){const l=v(!1);let u;return w(e.preference)?u=v(e.preference.props.currentValue):T(e.preference)?u=v(e.preference.props.currentValue):S(e.preference)?u=v(e.preference.props.currentValue):B(e.preference)?u=v(e.preference.props.currentValue):u=v(e.preference.props.currentValue),{dialog:l,val:u,isCheckBoxPreference:w,isEditTextPreference:T,isMultiSelectListPreference:S,isSwitchPreferenceCompat:B,isListPreference:G}},watch:{val(){this.isEditTextPreference(this.preference)||this.saveText()}},methods:{saveText(){let e;typeof this.val=="object"?e=JSON.stringify(this.val):e=this.val.toString(),this.$api.post(`/api/v1/source/${this.$route.params.sourceID}/preferences`,{position:this.position,value:e}).then(()=>{this.$emit("get-prefs")})}}}),K={class:"text-h5"},W={class:"text-h5"};function z(e,l,u,q,N,j){return o(),y($,null,[e.isSwitchPreferenceCompat(e.preference)?V((o(),n(m,{key:0,clickable:"",class:"row justify-between",onClick:l[1]||(l[1]=a=>e.val=!e.val)},{default:r(()=>[t(k,null,{default:r(()=>[t(p,null,{default:r(()=>[i(s(e.preference.props.title),1)]),_:1}),t(p,{caption:""},{default:r(()=>[i(s(e.preference.props.summary),1)]),_:1})]),_:1}),t(D,{modelValue:e.val,"onUpdate:modelValue":l[0]||(l[0]=a=>e.val=a),color:"blue"},null,8,["modelValue"])]),_:1})),[[g]]):d("",!0),e.isCheckBoxPreference(e.preference)?V((o(),n(m,{key:1,clickable:"",class:"row justify-between",onClick:l[3]||(l[3]=a=>e.val=!e.val)},{default:r(()=>[t(k,null,{default:r(()=>[t(p,null,{default:r(()=>[i(s(e.preference.props.title),1)]),_:1}),t(p,{caption:""},{default:r(()=>[i(s(e.preference.props.summary),1)]),_:1})]),_:1}),t(h,{modelValue:e.val,"onUpdate:modelValue":l[2]||(l[2]=a=>e.val=a),color:"blue"},null,8,["modelValue"])]),_:1})),[[g]]):d("",!0),e.isMultiSelectListPreference(e.preference)?V((o(),n(m,{key:2,clickable:"",onClick:l[6]||(l[6]=a=>e.dialog=!0)},{default:r(()=>[t(k,null,{default:r(()=>[t(p,null,{default:r(()=>[i(s(e.preference.props.title),1)]),_:1}),t(p,{caption:""},{default:r(()=>[i(s(e.preference.props.summary),1)]),_:1})]),_:1}),t(b,{modelValue:e.dialog,"onUpdate:modelValue":l[5]||(l[5]=a=>e.dialog=a)},{default:r(()=>[t(Q,{class:"q-pa-md"},{default:r(()=>[t(C,null,{default:r(()=>[U("div",K,s(e.preference.props.title),1),(o(!0),y($,null,P(e.preference.props.entries,(a,f)=>(o(),n(m,{key:f},{default:r(()=>[t(h,{modelValue:e.val,"onUpdate:modelValue":l[4]||(l[4]=c=>e.val=c),val:e.preference.props.entryValues[f],label:a,color:"blue"},null,8,["modelValue","val","label"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})),[[g]]):d("",!0),e.isEditTextPreference(e.preference)?V((o(),n(m,{key:3,clickable:"",onClick:l[9]||(l[9]=a=>e.dialog=!0)},{default:r(()=>[t(k,null,{default:r(()=>[t(p,null,{default:r(()=>[i(s(e.preference.props.title),1)]),_:1}),t(p,{caption:""},{default:r(()=>[i(s(e.preference.props.summary),1)]),_:1})]),_:1}),t(b,{modelValue:e.dialog,"onUpdate:modelValue":l[8]||(l[8]=a=>e.dialog=a)},{default:r(()=>[t(Q,{class:"q-pa-md"},{default:r(()=>[typeof e.val=="string"?(o(),n(E,{key:0,modelValue:e.val,"onUpdate:modelValue":l[7]||(l[7]=a=>e.val=a),outlined:""},null,8,["modelValue"])):d("",!0),t(R,{align:"right"},{default:r(()=>[V(t(O,{flat:"",label:"OK",color:"primary",onClick:e.saveText},null,8,["onClick"]),[[F]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})),[[g]]):d("",!0),e.isListPreference(e.preference)?V((o(),n(m,{key:4,clickable:"",onClick:l[12]||(l[12]=a=>e.dialog=!0)},{default:r(()=>[t(k,null,{default:r(()=>[t(p,null,{default:r(()=>[i(s(e.preference.props.title),1)]),_:1}),t(p,{caption:""},{default:r(()=>[i(s(e.preference.props.summary.replace("%s",e.preference.props.entries[e.preference.props.entryValues.indexOf(e.preference.props.currentValue)]||"")),1)]),_:1})]),_:1}),t(b,{modelValue:e.dialog,"onUpdate:modelValue":l[11]||(l[11]=a=>e.dialog=a)},{default:r(()=>[t(Q,{class:"q-pa-md"},{default:r(()=>[t(C,null,{default:r(()=>[U("div",W,s(e.preference.props.title),1),(o(!0),y($,null,P(e.preference.props.entries,(a,f)=>(o(),n(m,{key:f},{default:r(()=>[typeof e.val=="string"?(o(),n(A,{key:0,modelValue:e.val,"onUpdate:modelValue":l[10]||(l[10]=c=>e.val=c),val:e.preference.props.entryValues[f],label:a,color:"blue"},null,8,["modelValue","val","label"])):d("",!0)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})),[[g]]):d("",!0)],64)}var H=L(J,[["render",z]]);const X=I({name:"SettingsPage",components:{whatis:H},setup(){return{preferences:v([])}},watch:{},created:function(){this.getPrefs()},methods:{myTweak(e){return{height:e?`calc(100vh - ${e}px)`:"100vh"}},getPrefs(){this.$api.get(`/api/v1/source/${this.$route.params.sourceID}/preferences`).then(({data:e})=>this.preferences=e)}}});function Y(e,l,u,q,N,j){const a=M("whatis");return o(),n(C,{separator:"",dark:e.$q.dark.isActive,"style-fn":e.myTweak},{default:r(()=>[(o(!0),y($,null,P(e.preferences,(f,c)=>(o(),n(a,{key:c,preference:f,position:c,onGetPrefs:e.getPrefs},null,8,["preference","position","onGetPrefs"]))),128))]),_:1},8,["dark","style-fn"])}var he=L(X,[["render",Y]]);export{he as default};
