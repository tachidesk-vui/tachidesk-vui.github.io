import{storeGet as d}from"./StoreStuff.3fce3b94.js";import{r as c}from"./index.be2a1a55.js";const a=c(""),o=c(!1),v=d("baseUrl",location.origin),s=new URL(v);s.protocol=s.protocol=="https:"?"wss:":"ws:";let e;const i=n=>{a.value=n.data},r=()=>{console.log("Connected"),o.value=!0,e.addEventListener("message",i),e.addEventListener("close",t)},t=()=>{o.value=!1,e&&(console.error("Disconnected."),e.removeEventListener("message",i),e.removeEventListener("open",r),e.removeEventListener("close",t)),e=new WebSocket(`${s.href.slice(0,-1)}/api/v1/downloads`),e.addEventListener("open",r)};t();function L(){return{eventsFromServer:a,isConnected:o,sendMsg:l=>{e.send(l)}}}export{L as u};
