import{Q as C}from"./QList.e0ed1e2c.js";import{a as p,Q as k}from"./QItemLabel.ecd35ac2.js";import{Q as D}from"./QToggle.1c6effcd.js";import{Q as m}from"./QItem.59bf34e6.js";import{Q as h}from"./QCheckbox.e8104a5d.js";import{Q}from"./QCard.027ef52f.js";import{Q as b}from"./QDialog.7db3d526.js";import{Q as E}from"./QInput.d8ca20c6.js";import{Q as O}from"./QBtn.081715a2.js";import{Q as R}from"./QCardActions.165df4ae.js";import{Q as A}from"./QRadio.692b0473.js";import{R as y}from"./Ripple.11e33958.js";import{C as F}from"./ClosePopup.877d4f6d.js";import{k as w,l as T,m as S,n as U,o as G}from"./models.d7e94ac2.js";import{d as I,r as v,_ as L,f as o,v as g,y as V,j as n,k as r,m as t,p as i,t as s,n as d,u as B,F as $,x as P,s as M}from"./index.a274881f.js";import"./QSpinner.e63742ec.js";import"./use-dark.84a7be2d.js";import"./QIcon.ae5e754a.js";import"./use-checkbox.f3e940db.js";import"./option-sizes.3be83478.js";import"./use-form.96c62474.js";import"./use-transition.43b4e0c3.js";import"./focus-manager.32f8d49a.js";import"./scroll.89a78036.js";import"./dom.8b4f04cb.js";import"./use-key-composition.caae0f43.js";import"./uid.42677368.js";const J=I({name:"WhatIs",props:{preference:{type:Object,required:!0},position:{type:Number,required:!0}},emits:["get-prefs"],setup(e){const l=v(!1);let u;return w(e.preference)?u=v(e.preference.props.currentValue):T(e.preference)?u=v(e.preference.props.currentValue):S(e.preference)?u=v(e.preference.props.currentValue):U(e.preference)?u=v(e.preference.props.currentValue):u=v(e.preference.props.currentValue),{dialog:l,val:u,isCheckBoxPreference:w,isEditTextPreference:T,isMultiSelectListPreference:S,isSwitchPreferenceCompat:U,isListPreference:G}},watch:{val(){this.isEditTextPreference(this.preference)||this.saveText()}},methods:{saveText(){let e;typeof this.val=="object"?e=JSON.stringify(this.val):e=this.val.toString(),this.$api.post(`/api/v1/source/${this.$route.params.sourceID}/preferences`,{position:this.position,value:e}).then(()=>{this.$emit("get-prefs")})}}}),K={class:"text-h5"},W={class:"text-h5"};function z(e,l,u,q,N,j){return o(),g($,null,[e.isSwitchPreferenceCompat(e.preference)?V((o(),n(m,{key:0,clickable:"",class:"row justify-between",onClick:l[1]||(l[1]=a=>e.val=!e.val)},{default:r(()=>[t(k,null,{default:r(()=>[t(p,null,{default:r(()=>[i(s(e.preference.props.title),1)]),_:1}),t(p,{caption:""},{default:r(()=>[i(s(e.preference.props.summary),1)]),_:1})]),_:1}),t(D,{modelValue:e.val,"onUpdate:modelValue":l[0]||(l[0]=a=>e.val=a),color:"blue"},null,8,["modelValue"])]),_:1})),[[y]]):d("",!0),e.isCheckBoxPreference(e.preference)?V((o(),n(m,{key:1,clickable:"",class:"row justify-between",onClick:l[3]||(l[3]=a=>e.val=!e.val)},{default:r(()=>[t(k,null,{default:r(()=>[t(p,null,{default:r(()=>[i(s(e.preference.props.title),1)]),_:1}),t(p,{caption:""},{default:r(()=>[i(s(e.preference.props.summary),1)]),_:1})]),_:1}),t(h,{modelValue:e.val,"onUpdate:modelValue":l[2]||(l[2]=a=>e.val=a),color:"blue"},null,8,["modelValue"])]),_:1})),[[y]]):d("",!0),e.isMultiSelectListPreference(e.preference)?V((o(),n(m,{key:2,clickable:"",onClick:l[6]||(l[6]=a=>e.dialog=!0)},{default:r(()=>[t(k,null,{default:r(()=>[t(p,null,{default:r(()=>[i(s(e.preference.props.title),1)]),_:1}),t(p,{caption:""},{default:r(()=>[i(s(e.preference.props.summary),1)]),_:1})]),_:1}),t(b,{modelValue:e.dialog,"onUpdate:modelValue":l[5]||(l[5]=a=>e.dialog=a)},{default:r(()=>[t(Q,{class:"q-pa-md"},{default:r(()=>[t(C,null,{default:r(()=>[B("div",K,s(e.preference.props.title),1),(o(!0),g($,null,P(e.preference.props.entries,(a,f)=>(o(),n(m,{key:f},{default:r(()=>[t(h,{modelValue:e.val,"onUpdate:modelValue":l[4]||(l[4]=c=>e.val=c),val:e.preference.props.entryValues[f],label:a,color:"blue"},null,8,["modelValue","val","label"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})),[[y]]):d("",!0),e.isEditTextPreference(e.preference)?V((o(),n(m,{key:3,clickable:"",onClick:l[9]||(l[9]=a=>e.dialog=!0)},{default:r(()=>[t(k,null,{default:r(()=>[t(p,null,{default:r(()=>[i(s(e.preference.props.title),1)]),_:1}),t(p,{caption:""},{default:r(()=>[i(s(e.preference.props.summary),1)]),_:1})]),_:1}),t(b,{modelValue:e.dialog,"onUpdate:modelValue":l[8]||(l[8]=a=>e.dialog=a)},{default:r(()=>[t(Q,{class:"q-pa-md"},{default:r(()=>[typeof e.val=="string"?(o(),n(E,{key:0,modelValue:e.val,"onUpdate:modelValue":l[7]||(l[7]=a=>e.val=a),outlined:""},null,8,["modelValue"])):d("",!0),t(R,{align:"right"},{default:r(()=>[V(t(O,{flat:"",label:"OK",color:"primary",onClick:e.saveText},null,8,["onClick"]),[[F]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})),[[y]]):d("",!0),e.isListPreference(e.preference)?V((o(),n(m,{key:4,clickable:"",onClick:l[12]||(l[12]=a=>e.dialog=!0)},{default:r(()=>[t(k,null,{default:r(()=>[t(p,null,{default:r(()=>[i(s(e.preference.props.title),1)]),_:1}),t(p,{caption:""},{default:r(()=>[i(s(e.preference.props.summary.replace("%s",e.preference.props.entries[e.preference.props.entryValues.indexOf(e.preference.props.currentValue)]||"")),1)]),_:1})]),_:1}),t(b,{modelValue:e.dialog,"onUpdate:modelValue":l[11]||(l[11]=a=>e.dialog=a)},{default:r(()=>[t(Q,{class:"q-pa-md"},{default:r(()=>[t(C,null,{default:r(()=>[B("div",W,s(e.preference.props.title),1),(o(!0),g($,null,P(e.preference.props.entries,(a,f)=>(o(),n(m,{key:f},{default:r(()=>[typeof e.val=="string"?(o(),n(A,{key:0,modelValue:e.val,"onUpdate:modelValue":l[10]||(l[10]=c=>e.val=c),val:e.preference.props.entryValues[f],label:a,color:"blue"},null,8,["modelValue","val","label"])):d("",!0)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})),[[y]]):d("",!0)],64)}var H=L(J,[["render",z]]);const X=I({name:"SettingsPage",components:{whatis:H},setup(){return{preferences:v([])}},watch:{},created:function(){this.getPrefs()},methods:{myTweak(e){return{height:e?`calc(100vh - ${e}px)`:"100vh"}},getPrefs(){this.$api.get(`/api/v1/source/${this.$route.params.sourceID}/preferences`).then(({data:e})=>this.preferences=e)}}});function Y(e,l,u,q,N,j){const a=M("whatis");return o(),n(C,{separator:"",dark:e.$q.dark.isActive,"style-fn":e.myTweak},{default:r(()=>[(o(!0),g($,null,P(e.preferences,(f,c)=>(o(),n(a,{key:c,preference:f,position:c,onGetPrefs:e.getPrefs},null,8,["preference","position","onGetPrefs"]))),128))]),_:1},8,["dark","style-fn"])}var Pe=L(X,[["render",Y]]);export{Pe as default};
