import{Q as z}from"./QIcon.6f02d6d6.js";import{u as x,Q as ee,a as te,b as ae,c as oe,d as le,e as se}from"./use-meta.fa548c48.js";import{Q as f}from"./QBtn.cdb92c76.js";import{c as B,h as E,a as ne}from"./QSpinner.5d01ec6b.js";import{c as p,h as $,i as ie,e as L,r as u,a as re,w as y,o as ue,l as de,g as ce,d as U,_ as N,f as r,j as v,k as l,m as a,n as b,p as Q,t as S,q as k,s as H,u as j,v as M,x as O,F as P,y as V,z as me,A as fe,B as pe}from"./index.eb7b1268.js";import{Q as C,a as _}from"./QItemLabel.ab940886.js";import{Q as A}from"./QItem.967db878.js";import{Q as ve}from"./QResizeObserver.9ffe9e37.js";import{Q as he}from"./QCardSection.e2ca179a.js";import{Q as ge}from"./QCardActions.688c2c84.js";import{Q as ke}from"./QCard.5fb85c23.js";import{Q as we}from"./QDialog.53cdfb16.js";import{C as T}from"./ClosePopup.299e23d7.js";import{u as ye}from"./use-quasar.6ba8460a.js";import{storeGet as be,storeSet as $e}from"./StoreStuff.1b509852.js";import"./use-dark.1e985ad9.js";import"./TouchPan.07edefc5.js";import"./selection.dff356e6.js";import"./format.2a3572e1.js";import"./QScrollObserver.4f69e5b7.js";import"./scroll.ae6da8d4.js";import"./dom.6c863bc6.js";import"./Ripple.a15f7331.js";import"./use-transition.367883b0.js";import"./focus-manager.32f8d49a.js";var qe=B({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:s}){const d=p(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>$("div",{class:d.value},E(s.default))}}),Qe=B({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:s}){const d=p(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>$("div",{class:d.value,role:"toolbar"},E(s.default))}}),Se=B({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:s,emit:d}){const{proxy:{$q:h}}=ce(),o=ie(de,L);if(o===L)return console.error("QFooter needs to be child of QLayout"),L;const g=u(parseInt(e.heightHint,10)),c=u(!0),q=u(re.value===!0||o.isContainer.value===!0?0:window.innerHeight),n=p(()=>e.reveal===!0||o.view.value.indexOf("F")>-1||h.platform.is.ios&&o.isContainer.value===!0),D=p(()=>o.isContainer.value===!0?o.containerHeight.value:q.value),F=p(()=>{if(e.modelValue!==!0)return 0;if(n.value===!0)return c.value===!0?g.value:0;const t=o.scroll.value.position+D.value+g.value-o.height.value;return t>0?t:0}),I=p(()=>e.modelValue!==!0||n.value===!0&&c.value!==!0),W=p(()=>e.modelValue===!0&&I.value===!0&&e.reveal===!0),G=p(()=>"q-footer q-layout__section--marginal "+(n.value===!0?"fixed":"absolute")+"-bottom"+(e.bordered===!0?" q-footer--bordered":"")+(I.value===!0?" q-footer--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus"+(n.value!==!0?" hidden":""):"")),K=p(()=>{const t=o.rows.value.bottom,i={};return t[0]==="l"&&o.left.space===!0&&(i[h.lang.rtl===!0?"right":"left"]=`${o.left.size}px`),t[2]==="r"&&o.right.space===!0&&(i[h.lang.rtl===!0?"left":"right"]=`${o.right.size}px`),i});function m(t,i){o.update("footer",t,i)}function w(t,i){t.value!==i&&(t.value=i)}function J({height:t}){w(g,t),m("size",t)}function X(){if(e.reveal!==!0)return;const{direction:t,position:i,inflectionPoint:Z}=o.scroll.value;w(c,t==="up"||i-Z<100||o.height.value-D.value-i-g.value<300)}function Y(t){W.value===!0&&w(c,!0),d("focusin",t)}y(()=>e.modelValue,t=>{m("space",t),w(c,!0),o.animate()}),y(F,t=>{m("offset",t)}),y(()=>e.reveal,t=>{t===!1&&w(c,e.modelValue)}),y(c,t=>{o.animate(),d("reveal",t)}),y([g,o.scroll,o.height],X),y(()=>h.screen.height,t=>{o.isContainer.value!==!0&&w(q,t)});const R={};return o.instances.footer=R,e.modelValue===!0&&m("size",g.value),m("space",e.modelValue),m("offset",F.value),ue(()=>{o.instances.footer===R&&(o.instances.footer=void 0,m("size",0),m("offset",0),m("space",!1))}),()=>{const t=ne(s.default,[$(ve,{debounce:0,onResize:J})]);return e.elevated===!0&&t.push($("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),$("footer",{class:G.value,style:K.value,onFocusin:Y},t)}}});const Ce=U({name:"EssentialLink",props:{title:{type:String,required:!0},caption:{type:String,default:""},link:{type:String,default:"#"},icon:{type:String,default:""}}});function _e(e,s,d,h,o,g){return r(),v(A,{to:e.link,class:"text-grey-7","active-class":"text-primary"},{default:l(()=>[e.icon?(r(),v(C,{key:0,avatar:""},{default:l(()=>[a(z,{name:e.icon,size:"lg"},null,8,["name"])]),_:1})):b("",!0),a(C,null,{default:l(()=>[a(_,null,{default:l(()=>[Q(S(e.title),1)]),_:1}),a(_,{caption:""},{default:l(()=>[Q(S(e.caption),1)]),_:1})]),_:1})]),_:1},8,["to"])}var Le=N(Ce,[["render",_e]]);const Ve=[{title:"Library",caption:"",icon:"o_collections_bookmark",link:"/library?tab=0"},{title:"Updates",caption:"",icon:"o_new_releases",link:"/updates"},{title:"Extensions",caption:"",icon:"o_extension",link:"/extensions"},{title:"Sources",caption:"",icon:"o_explore",link:"/sources"},{title:"Downloads",caption:"",icon:"o_download",link:"/downloads"},{title:"Settings",caption:"",icon:"settings",link:"/settings"}],Te=U({name:"MainLayout",components:{EssentialLink:Le},setup(){const e=ye(),s=u("Quasar App");x(()=>({title:s.value,titleTemplate:h=>`${h} - Tachidesk Quasar`})),e.dark.set(be("dark",!0));const d=u(!0);return{title:s,essentialLinks:Ve,tru:u(!0),leftDrawerOpen:d,toggledark(){e.dark.toggle(),$e("dark",e.dark.isActive,!0)},doSearch:u(!1),Searchenter:u(!1),FS:u(!1),newReleaseData:u({}),newReleasepopup:u(!1)}},computed:{scrollbarTheme(){return this.$q.dark.isActive?"darkSB":"lightSB"}},watch:{scrollbarTheme(e,s){document.body.classList.remove(s),document.body.classList.add(e)}},mounted(){document.body.classList.add(this.scrollbarTheme),window.addEventListener("full-screen",e=>this.isFS(e)),this.$q.localStorage.getItem("dontshowagainRL")||this.$axios.get("https://api.github.com/repos/Suwayomi/Tachidesk-VUI/releases/latest").then(({data:e})=>{e.tag_name!="r235"&&(this.newReleaseData=e,this.newReleasepopup=!0)})},unmounted(){document.body.classList.remove(this.scrollbarTheme)},methods:{dontshowagain(){this.$q.localStorage.set("dontshowagainRL",!0)},setTitle(e){this.title=e},minimize(){this.$q.platform.is.electron&&window.myWindowAPI.minimize()},toggleMaximize(){this.$q.platform.is.electron&&window.myWindowAPI.toggleMaximize()},closeApp(){this.$q.platform.is.electron&&window.myWindowAPI.close()},isFS(e){console.log(e),this.FS=e.detail}}}),ze=e=>(fe("data-v-293a7b71"),e=e(),pe(),e),Ae=ze(()=>j("div",null,"Download the newest release from the github",-1));function Be(e,s,d,h,o,g){const c=H("router-view"),q=H("EssentialLink");return r(),v(ee,{view:"hHh Lpr lFr",class:k([e.scrollbarTheme,"mainLayout"])},{default:l(()=>[a(oe,{elevated:"",class:k(e.$q.dark.isActive?"bg-primaryD":"bg-primary")},{default:l(()=>[e.$q.platform.is.electron?(r(),v(te,{key:0,class:k(["q-electron-drag",e.FS?"hidden":""])},{default:l(()=>[a(z,{name:"img:favicon.ico",class:"q-electron-drag--exception"}),j("div",null,S(`${e.title} - Tachidesk Quasar`),1),a(ae),a(f,{dense:"",flat:"",icon:"minimize",onClick:e.minimize},null,8,["onClick"]),a(f,{dense:"",flat:"",icon:"crop_square",onClick:e.toggleMaximize},null,8,["onClick"]),a(f,{dense:"",flat:"",icon:"close",onClick:e.closeApp},null,8,["onClick"])]),_:1},8,["class"])):b("",!0),a(Qe,null,{default:l(()=>[e.$q.screen.xs||e.$q.screen.sm?b("",!0):(r(),v(f,{key:0,flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:s[0]||(s[0]=n=>e.leftDrawerOpen=!e.leftDrawerOpen)})),a(f,{icon:"arrow_back",flat:"",round:"",onClick:s[1]||(s[1]=n=>e.$router.go(-1))}),a(qe,{class:"col-grow q-pr-none"},{default:l(()=>[Q(S(e.$q.screen.xs?"":e.title),1)]),_:1}),a(c,{name:"inBar"}),a(f,{elevated:"",class:k(["q-ml-sm",e.$q.dark.isActive?"light":"dark"]),round:"",icon:e.$q.dark.isActive?"light_mode":"dark_mode",onClick:e.toggledark},null,8,["class","icon","onClick"])]),_:1})]),_:1},8,["class"]),e.$q.screen.sm||e.$q.screen.xs?(r(),v(Se,{key:0,elevated:"",class:k(["text-primary flex no-wrap justify-evenly",e.$q.dark.isActive?"bg-dark":"bg-light"])},{default:l(()=>[(r(!0),M(P,null,O(e.essentialLinks,n=>(r(),v(A,{key:n.link,to:n.link,class:"text-grey-7","active-class":"text-primary"},{default:l(()=>[a(C,null,{default:l(()=>[a(z,{name:n.icon,size:"sm"},null,8,["name"])]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:1},8,["class"])):b("",!0),e.$q.screen.sm||e.$q.screen.xs?b("",!0):(r(),v(le,{key:1,modelValue:e.tru,"onUpdate:modelValue":s[2]||(s[2]=n=>e.tru=n),"show-if-above":"",mini:e.leftDrawerOpen,breakpoint:0,class:k(e.$q.dark.isActive?"bg-secondaryD":"bg-secondary")},{default:l(()=>[(r(!0),M(P,null,O(e.essentialLinks,n=>(r(),v(q,me({key:n.title},n),null,16))),128))]),_:1},8,["modelValue","mini","class"])),a(se,null,{default:l(()=>[a(c,{class:k([e.$q.dark.isActive?"bg-dark-page":"bg-light-page","OFlow"]),onSetTitle:e.setTitle},null,8,["class","onSetTitle"])]),_:1}),a(we,{modelValue:e.newReleasepopup,"onUpdate:modelValue":s[3]||(s[3]=n=>e.newReleasepopup=n)},{default:l(()=>[a(ke,{style:{"min-width":"350px"}},{default:l(()=>[a(he,{class:""},{default:l(()=>[a(A,null,{default:l(()=>[a(C,null,{default:l(()=>[a(_,{class:"text-h6"},{default:l(()=>[Q(" A new version of VUI is avalable ")]),_:1}),a(_,{caption:"",class:"text-info q-pt-lg"},{default:l(()=>[Ae]),_:1})]),_:1})]),_:1})]),_:1}),a(ge,{align:"right",class:"text-primary"},{default:l(()=>[V(a(f,{href:e.newReleaseData.html_url,flat:"",label:"Github"},null,8,["href"]),[[T]]),V(a(f,{flat:"",label:"Ok"},null,512),[[T]]),V(a(f,{flat:"",label:"Dont show again",onClick:e.dontshowagain},null,8,["onClick"]),[[T]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["class"])}var st=N(Te,[["render",Be],["__scopeId","data-v-293a7b71"]]);export{st as default};
